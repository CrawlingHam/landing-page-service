version: 1
applications:
    - frontend:
          phases:
              preBuild:
                  commands:
                      - npm cache clean --force
                      - npm ci
              build:
                  commands:
                      - npm run build
          artifacts:
              baseDirectory: .next
              files:
                  - "**/*"
                  - ../public/**/*
                  - ../node_modules/**/*
                  - ../package.json
                  - next.config.ts
          cache:
              paths:
                  - node_modules/**/*
                  - .next/cache/**/*
